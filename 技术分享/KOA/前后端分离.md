---
layout: default
title: {{ site.name }}
---

# 点餐终端监控平台前后端分离总结

> 随着前端技术的发展，现如今前端开发的边界正逐渐被推向后端，两者的界限在重合与分离中不断交替。回首过往，Node.js在2009年的横空出世可以看作前端开发的里程碑事件，从此JavaScript不在局限于浏览器的狭窄空间，开始在服务器的广阔天空上展翅翱翔。

点餐终端团队在2017年Q2启动了监控平台的建设工程，按照新技术先小范围试点再逐步推广到整条业务线的模式，我们开始在监控平台搭设自己的前端服务系统。

### 为什么前后端分离
结合美团点评点餐的过往业务来说，实现前后端分离有以下几点好处:

+ 前端模板渲染：在以后端为主MVC时代，前端通常会在本地写demo，再将html文件交给后端套ftl模板，这样不但增加了总体工作量，之后的沟通和联调成本也十分显著。而分离后，页面改由前端服务器渲染生成，前端可以用ejs等模板直接开发，省去了不少沟通成本。

+ 路由控制：通过前后端分离，路由控制权完全交由前端，后端回归到纯粹提供接口服务，更专心于各种业务逻辑的开发。

+ 跨域问题：因为渐进迭代和历史问题，目前点餐业务部分前端页面是部署在美团静态服务器上的，而页面上Ajax请求的目标接口则是对应后端的Java服务器，由此产生了跨域问题。在启用Node服务器作为代理转发请求后，跨域问题也自然解决。

同时，前后端分离有利也有弊:

+ 前端工作量增加：分离之后，前端也需要参与到服务端的开发，自然工作量会加大不少。

+ 对团队整体技术水平的要求更高。

### 如何前后端分离
基于以上几点，点餐监控平台通过Node.js来搭建前端服务器，实现了基于KOA的前后端分离架构，系统结构图如下：  

![前后端分离结构图](../../img/技术分享/koa1.png)
<center><font color=grey>美团点评点餐业务前后端分离结构图</font></center>

在这种模式下，前后端的权责区分更加清晰：

1. 路由完全交由前端控制，前端可以自主进行独立URL Design。

2. 用户终端直接访问Node服务器，Node服务器进行模板渲染和请求转发工作。后端从”套模板“的工作中解放，专注于业务逻辑处理和接口提供。

3. Node服务器在拿到客户端请求后，转发给后端Java服务器，前后端服务器在内网环境进行更高效通信的同时，也解决了跨域问题。  

### 监控平台结构设计
点餐终端的数据监控平台采用了




### 什么样的业务不适合前后端分离  技术决定业务
商业产品，业务为主，不要为了技术而技术。业务有适合前后端分离的就一定也有不适合的，下面列出部分我认为不太适合的场景，以供参考：

1. 较简单的内部管理系统，这样的系统就不需要前后端分离，否则只会白白增加很多工作量。

2. 对于无需频繁更改的业务，也可以考虑使用传统的开发方式。

3. 对小公司或者创业公司来说，初期可以不用分的这么细，毕竟使用越复杂的方式，对团队成员的技术水平也会要求更高。


直出是什么？到底是怎样的性能优化？本文将结合从在浏览器输入url，到展示最终页面的过程来对其进行一步步分析，并将在手Q web 中的实际应用实践进行总结。

### 补充hunt的结构


软件工程不存在“银弹”，没有最好的技术，只有最适合业务的技术方案。

### 参考文档
- [Web 研发模式的演变](https://github.com/lifesinger/blog/issues/184)（好文章）
- [Node直出理论与实践总结](https://github.com/joeyguo/blog/issues/8)（好文章）
- [前后端分离必要性](http://www.itwendao.com/article/detail/219126.html)
- [前端后端分离，怎么解决SEO优化的问题呢？](https://www.zhihu.com/question/52235652)
- [从单页应用(SPA)到服务器渲染(SSR)](http://www.jianshu.com/p/1e63f434051d)
- [Node.js 框架对比之 Express VS Koa](http://www.cnblogs.com/sybboy/p/6418526.html)


加个git hub demo
