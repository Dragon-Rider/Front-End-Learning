---
layout: default
title: {{ site.name }}
---

# 点餐终端前后端分离总结

## 前后端分离
 > 现代前端开发中，前端和后端 的界限已经越来越模糊了，随着前端的不断发展，前端开发的边界在逐渐的被推向后端。在2009年 Node.js 横空出世，随着其社区的凶猛发展，前端圈子中用javascript来作服务器相关的开发一度成为一种时尚。

结合美团点评的点餐业务来说，我们首先想到的是用Node.js来搭建前端服务器，实现系统的前后端分离。

基于我们的业务考虑，这样做事有几点好处的:

1. 前端模板渲染：分离后的页面由前端服务器渲染生成，前端可以用ejs等模板直接渲染生成，甚至静态的页面可以直接用html文件来替代。而再此之前，前端工程师开发完后页面后，还会将html文件交给后端转换为java的ftl模板，这样不仅增加了总体工作量，之后的沟通和联调成本也十分显著。同时对没用过ftl模板语言的工程师来说，其学习成本也还得考虑进去。

2. 解决跨域问题：因为渐进迭代和历史遗留问题，目前点餐业务的前端页面是部署在美团静态服务器上的，而页面上Ajax请求的目标接口则是对应后端的java服务器，因此会产生跨域问题。在启用Node Server作为代理转发请求后跨域问题迎刃而解。

3. 前端路由控制：通过前后端分离，路由控制完全交给前端处理，后端只用纯粹地提供各种API接口，更专心于业务逻辑层的开发。

同时，前后端分离有利也有弊:
 
1. 前端工作量增加：由于用户访问的第一道Server开始变为前端服务器，前端也需要参与服务端的开发，工作量会加大不少。

2. 对团队整体技术水平的要求更高。

3. 不利于SEO优化：如果网站前端只使用SPA(Single Page Application 单页应用)搭建，node服务器只做接口代理，则会对搜索引擎不友好，不利于爬出抓取网站数据。所以可以采用首屏SSR(Server Side Render 服务端渲染)的方式，node服务器直接作为前端模板引擎渲染出首屏页面，来进行SEO优化。

基于以上几点，我们在点餐的具体业务中实现了基于KOA的前后端分离，系统结构图如下：
  
![前后端分离结构图](../../img/技术分享/koa1.png)
<center><font color=grey>美团点评点餐业务前后端分离结构图</font></center>
1. 用户终端直接访问我们的前端node服务器


### 参考文档
##### 前后端分离
- [Web 研发模式的演变](http://blog.jobbole.com/65509/)
- [前后端分离必要性](http://www.itwendao.com/article/detail/219126.html)
- [前端后端分离，怎么解决SEO优化的问题呢？](https://www.zhihu.com/question/52235652)
- [暂未看完][从单页应用(SPA)到服务器渲染(SSR)](http://www.jianshu.com/p/1e63f434051d)
- [Node.js 框架对比之 Express VS Koa](http://www.cnblogs.com/sybboy/p/6418526.html)

